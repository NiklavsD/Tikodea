---
phase: 05-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/TagEditor.tsx
  - frontend/src/app/video/[id]/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can add manual tags to a video"
    - "User can remove manual tags from a video"
    - "Manual tags are visually distinct from hashtags"
    - "Tag changes persist across page refresh"
  artifacts:
    - path: "frontend/src/components/TagEditor.tsx"
      provides: "Tag editing component with add/remove"
      min_lines: 50
    - path: "frontend/src/app/video/[id]/page.tsx"
      provides: "Integrated TagEditor component"
      contains: "TagEditor"
  key_links:
    - from: "TagEditor.tsx"
      to: "api.updateTags"
      via: "API call on tag change"
      pattern: "updateTags.*video.*id"
    - from: "video/[id]/page.tsx"
      to: "TagEditor"
      via: "Component import and usage"
      pattern: "import.*TagEditor"
---

<objective>
Complete manual tag editing functionality on video detail page.

Purpose: Enable users to add/remove custom tags for organizing videos (DISC-03)
Output: Working tag editor component with add/remove capability
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Existing codebase context
@frontend/src/lib/api.ts
@frontend/src/app/video/[id]/page.tsx
@backend/api.py

Backend already has PATCH /api/videos/:id/tags endpoint.
Frontend has updateTags() API function.
Missing: UI component to edit manual tags.

Current tag display shows hashtags (from TikTok) and manual_tags (user-added) but no editing capability.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TagEditor component</name>
  <files>frontend/src/components/TagEditor.tsx</files>
  <action>
Create TagEditor.tsx component with:
- Props: videoId, currentTags (string[]), onTagsChange callback
- State: editing mode toggle, new tag input
- UI elements:
  - Display current manual tags as chips with X button to remove
  - "Edit tags" button to enter edit mode
  - In edit mode: input field + "Add" button
  - "Save" button to persist changes
- Functionality:
  - Add tag: append to list, call updateTags() API
  - Remove tag: filter from list, call updateTags() API
  - Input validation: trim whitespace, prevent duplicates, max 30 chars
- Use Tailwind for styling, consistent with existing VideoCard tag styles
- Icons: Tag (from lucide-react) for add button, X for remove
  </action>
  <verify>npm run build completes without TypeScript errors</verify>
  <done>TagEditor.tsx exists, exports TagEditor component, compiles successfully</done>
</task>

<task type="auto">
  <name>Task 2: Integrate TagEditor into video detail page</name>
  <files>frontend/src/app/video/[id]/page.tsx</files>
  <action>
In video/[id]/page.tsx:
1. Import TagEditor component
2. Add in "Video Info" card section, after existing tag display
3. Pass props: videoId={video.id}, currentTags={video.manual_tags}, onTagsChange callback
4. onTagsChange callback: refetch video data to update UI
5. Show manual tags with distinct styling (already implemented with Tag icon)
6. Position: Below hashtag chips, above context section
  </action>
  <verify>
- npm run build succeeds
- Page renders without console errors
- TagEditor appears on video detail page
  </verify>
  <done>
TagEditor integrated and visible on video detail page, ready for testing
  </done>
</task>

<task type="auto">
  <name>Task 3: Test tag editing flow</name>
  <files>N/A - testing existing implementation</files>
  <action>
Verify tag editing works end-to-end:
1. Start backend: cd backend && python api.py
2. Start frontend: cd frontend && npm run dev
3. Navigate to any video detail page
4. Add a manual tag, verify it appears with Tag icon
5. Remove a tag, verify it disappears
6. Refresh page, verify manual tags persist
7. Check backend logs for PATCH /api/videos/:id/tags calls
8. Verify tag appears in feed filters
  </action>
  <verify>
- Tag add/remove works in browser
- Changes persist across refresh
- No console errors or backend errors
  </verify>
  <done>
Manual tag editing works end-to-end: add, remove, persist, display
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] TagEditor.tsx component exists and builds
- [ ] Component integrated into video detail page
- [ ] Can add manual tags via UI
- [ ] Can remove manual tags via UI
- [ ] Tags persist across page refresh
- [ ] Manual tags visually distinct from hashtags
- [ ] No TypeScript or runtime errors
</verification>

<success_criteria>
- All tasks completed
- TagEditor component functional and styled
- Manual tag editing works end-to-end
- DISC-03 requirement satisfied (user can add manual tags)
</success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard/05-01-SUMMARY.md`
</output>
